### Как сдавать задания

Вы уже изучили блок «Системы управления версиями», и начиная с этого занятия все ваши работы будут приниматься ссылками на .md-файлы, размещённые в вашем публичном репозитории.

Скопируйте в свой .md-файл содержимое этого файла; исходники можно посмотреть [здесь](https://raw.githubusercontent.com/netology-code/sysadm-homeworks/devsys10/04-script-01-bash/README.md). Заполните недостающие части документа решением задач и отправляйте на проверку.

---


# Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"

## Обязательная задача 1

Есть скрипт:
```bash
a=1
b=2
c=a+b
d=$a+$b
e=$(($a+$b))
```

Какие значения переменным c,d,e будут присвоены? Почему?

***c** присвоится строка `a+b`, т.к. в bash изначально все есть строка ; **d** присвоится строка `1+2`, в этом случае подставятся значения переменных a,b; **e** будет 3, с помощью двойных скобок осуществляется математическое сложение, благодаря **$** результат выделяется в переменную.* 


## Обязательная задача 2
На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным. В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:
```bash
while ((1==1)
do
	curl https://localhost:4757
	if (($? != 0))
	then
		date >> curl.log
	fi
done
```

*В строке `while ((1==1)` не хватает второй круглой закрывающей скобки, поэтому непонятно как скрипт будет уничтожать дисковое пространство, если не сможет запуститься? В случае исправления обозначенного синтаксиса для прерывания цикла можно втавить конструкцию `else break`. Результат примет вид*
	

	 while ((1==1))
	 do
	 curl https://localhost:4757
	 if (($? != 0))
	 then
	 date >> curl.log
	 else
	 break
	 fi
	 done


Необходимо написать скрипт, который проверяет доступность трёх IP: `192.168.0.1`, `173.194.222.113`, `87.250.250.242` по `80` порту и записывает результат в файл `log`. Проверять доступность необходимо пять раз для каждого узла.

### Ваш скрипт:

	
	#!/usr/bin/env bash

	hosts=(192.168.0.1 173.194.222.113 87.250.250.242)
	j=0
	while  [ $j -lt 5 ]
	do
	  for i in ${hosts[@]}
	  do
	  curl http://$i:80 --connect-timeout 2 &>>/dev/null
	    if (($? != 0))
	    then
	    echo  connect to $i : status error>>${0}.error.log
	    else
	    echo  connect to $i : status OK>>${0}.error.log
	    fi
	 done
	((j++))
	done
	cat ${0}.error.log


## Обязательная задача 3
Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается.

### Ваш скрипт:



	#!/usr/bin/env bash

	hosts=(192.168.0.1 173.194.222.113  87.250.250.242)
	while ((1==1))
	do
	   for i in ${hosts[@]}
	   do
	   curl http://$i:80 --connect-timeout 2 &>>/dev/null
		  if (($? != 0))
		  then
		  echo not connect to $i>>${0}.error.log
		  k=1
		  break
		  fi
	   done
	   if ((k == 1))
	   then
	   break
	   fi
	done
	cat ${0}.error.log
